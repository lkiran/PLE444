@model  PLE444.Models.CourseMembersViewModel

@{
    ViewBag.Title = "Grades";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="panel panel-bluegray" data-widget='{"draggable": "false"}'>
    <div class="panel-heading">
        <span class="pull-right">@Model.CourseInfo.Name - @Model.CourseInfo.Description</span>
        <h2>
            <ul class="nav nav-tabs">
                <li><a href="@Url.Action("Chapters","Course",new { id = @Model.CourseInfo.ID })">Bölümler</a></li>
                <li><a href="@Url.Action("Assignments","Course",new { id = @Model.CourseInfo.ID })"> Ödevler</a></li>
                <li><a href="@Url.Action("Materials","Course",new { id = @Model.CourseInfo.ID })">Materyaller</a></li>
                <li class="active"><a href="#">Notlar</a></li>
                <li><a href="@Url.Action("Discussion","Course",new { id = @Model.CourseInfo.ID })">Tartışmalar</a></li>
            </ul>
        </h2>
    </div>
</div>

<div class="panel panel-default" data-widget='{"draggable": "false"}'>
    <div class="panel-heading">
   
        <div class="panel-ctrls" data-actions-container="" data-action-collapse='{"target": ".panel-body"}'></div>
    </div>
    <div class="panel-body">
        <table class="table table-hover m-n">
            <thead>
                <tr>                   
                    <th>Kullanıcı</th>
                    @foreach (var item in Model.GradeTypes)
                    {
                        <th title="@item.Description
Ağırlık: @(item.Effect*100)%
Max Score: @item.MaxScore">@item.Name</th>
                    }
                    <th>Toplam</th>
                </tr>
            </thead>
            <tbody>                
                @foreach (var user in Model.Users)
                {
                    var gradesOfUser = Model.UserGrades.Where(u => u.UserID == user.Id).ToList();
                    
                    <tr>
                        <td><a href="@Url.Action("Profil", "User", new { id= user.Id })">@user.FirstName @user.LastName</a></td>
                        @foreach (var gradeType in Model.GradeTypes)
                        {
                            var gu = gradesOfUser.FirstOrDefault(g => g.GradeType == gradeType);

                            if (gu == null)
                            {
                                 <td> - </td>
                            }
                            else
                            {
                                 <td>@gu.Grade</td>
                            }
                        }
                        <td>-</td>
                    </tr>
                }
            </tbody>
        </table>
    
        
    </div>
</div>

@if (Model.isCreator)
{
    <a href="@Url.Action("CreateGradeType",new { id = Model.CourseInfo.ID })" class="btn btn-primary-alt" id="dyna-del">Not Türü Ekle</a>
}