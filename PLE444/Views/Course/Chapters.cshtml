@model PLE444.Models.Course
@{
    ViewBag.Title = "Chapters";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="panel panel-bluegray" data-widget='{"draggable": "false"}'>
    <div class="panel-heading">
        <span class="pull-right">@ViewBag.CourseName</span>
        <h2>
            <ul class="nav nav-tabs">
                <li class="active"><a href="#">Bölümler</a></li>
                <li><a href="@Url.Action("Assignments","Course",new { id = Model.ID })"> Ödevler</a></li>
                <li><a href="@Url.Action("Materials","Course",new { id = Model.ID })">Materyaller</a></li>
                <li><a href="@Url.Action("Grades","Course",new { id = Model.ID })">Notlar</a></li>
                <li><a href="@Url.Action("Discussion","Course",new { id = Model.ID })">Tartışmalar</a></li>
            </ul>
        </h2>
    </div>
</div>
@if (Model != null)
{
    foreach (var item in Model.Chapters)
    {
        <div class="panel panel-default" data-widget='{"draggable";: "false"}' data-widget-static="" style="visibility: visible; opacity: 1; display: block; transform: translateY(0px);">
            <div class="panel-heading"> 
                    
                <h2>@Html.DisplayFor(modelItem => item.Title)</h2>
                <div class="pull-right">
                    @Html.DisplayFor(modelItem => item.DateAdded), @{var h = new PLE444.Helpers.DataManipulationHelper(); }
                    @h.GetDeltaDate(item.DateAdded)
                </div>
                

            </div>
            <div class="panel-body" style="height: 148px">
                @(new HtmlString(item.Description))

                <ul style="list-style-type: none" ;>
                    @foreach (var doc in item.Materials)
                    {
                        <li>
                            <a href="@Url.Action("Materials", new { id= Model.ID })">     
                                @doc.Title                          
                            </a>
                        </li>
                    }
                </ul>
            </div>
            @if(ViewBag.CurrentUser == Model.CreatorId)
            {
                <div class="panel-footer">
                    <a href="@Url.Action("MeterialAdd", "Course",new { id = item.Id })" class="btn btn-primary-alt pull-right" id="dyna-del"> Materyal Ekle</a>                       
                </div>
            }
           
        </div>
    }
}

@if(ViewBag.CurrentUser == Model.CreatorId)
{
    <a href="@Url.Action("ChapterCreate",new { id = Model.ID })" class="btn btn-primary-alt" id="dyna-del">Yeni Bölüm Ekle</a>
}





